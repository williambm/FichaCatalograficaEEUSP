<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Ficha Catalográfica</title>

        <!--carrega CSS bootstrap-->
        <link rel="stylesheet" href="./src/bootstrap/css/bootstrap.css">
        <!--carrega CSS -->
        <link rel="stylesheet" href="./src/estilo.css">
        <!--insere o Bootstrap -->
        <script type="text/javascript" src="./src/bootstrap/js/bootstrap.min.js"></script>
        <!--insere o JQuery -->
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        

        <script>
            //pega os dados do localstorage
            var ficha = localStorage.getItem("tbFicha");
            //Transforma de String para JSON 
            var fichaOBJ = JSON.parse(ficha);
            //neste segundo PARSE o objeto fica Okay, acerta o parse de vez
            objeto = JSON.parse(fichaOBJ);
            //Teste de visualização de atributo do objeto
                console.log(objeto);
        </script>

    </head>
    <body class="fichaBody">
        <h1>AUTORIZO A REPRODUÇÃO E DIVULGAÇÃO TOTAL OU PARCIAL DESTE TRABALHO, POR
            QUALQUER MEIO CONVENCIONAL OU ELETRÔNICO, PARA FINS DE ESTUDO E PESQUISA, 
            DESDE QUE CITADA A FONTE.
        </h1>
        <br>
        <p class="pFicha">Assinatura: _______________________________</p>
        <br>
        <p class="pFicha">Data: ___/___/____</p>
        
        <br><br><br><br><br>
        <br><br><br><br><br>
        <br><br><br><br><br>
        <br><br><br><br><br>
        <br><br>

        <p class="msgCatalogacao"><b>Catalogação na Publicação (CIP)</b></p>        
        <p class="msgCatalogacao"><b>Biblioteca "Wanda de Aguiar Horta"</b></p>
        <p class="msgCatalogacao"><b>Escola de Enfermagem da Universidade de São Paulo</b></p>
        <br>

        <div class="container ">
            <div class="row ">
                <div class="col-2 antesFicha"></div>
                <div class="col-8 caixaFicha ">
                    <br>
                    <p id="nome"></p>
                    <p id="tituloSubtitulo"></p>
                    <p id="paginas"></p>                   
                    <p id="tipoTese"></p>                   
                    <p id="orientador"></p>                   
                    <p id="coorientador"></p>                   
                    <p id="areaConcentra"></p>                   
                    <p id="assunto"></p>              
                    <br>
                </div>
                <div class="col-2 depoisFicha"></div>
            </div>
        </div>
        <script>
            //Primeira Linha - Nome
            document.getElementById("nome").innerHTML = objeto.nomeUltimo + ', '
            +objeto.nomeAluno +' '+objeto.nomeMeio;
            //Segunda Linha - titulo / subtitulo / nome / ano
            document.getElementById("tituloSubtitulo").innerHTML = objeto.trabalhoTitulo+ ': '
            +objeto.trabalhoSubtitulo + ' / '+ objeto.nomeAluno+ ' '+ objeto.nomeMeio+ ' '
            +objeto.nomeUltimo +'. São Paulo, '+ objeto.trabalhoAno+ '.';
            //Terceira Linha - paginas
            document.getElementById("paginas").innerHTML = objeto.trabalhoPaginas + ' p.';
            //Quarta Linha - tipo da tese
            document.getElementById("tipoTese").innerHTML = objeto.trabalhoTipo 
            + ' - Escola de Enfermagem da Universidade de São Paulo.';
            //Quinta Linha - orientador
            document.getElementById("orientador").innerHTML = 'Orientador(a): '+ objeto.tituloOrientador 
            + ' '+ objeto.nomeOrientador;
            //Sexta Linha - Coorientador
            document.getElementById("coorientador").innerHTML = 'Coorientador(a): '+ objeto.tituloCoorientador 
            + ' '+ objeto.nomeCoorientador;
            //Sétima Linha - Área de Concentração
            document.getElementById("areaConcentra").innerHTML = 'Área de concentração: '
            + objeto.trabalhoAreaConcentracao;
            //Oitava Linha - Assuntos
                //Fluxo de controle da operação dos assuntos
                var assunto = '';  
                var teste = true; 
                while( teste === true){                 
                    if(objeto.assunto1 > ''){
                        assunto = '1. '
                        + objeto.assunto1 +'.';                
                    }                
                    if(objeto.assunto2 > ''){
                        assunto +=' 2. '+objeto.assunto2 +'.';                    
                    }else {
                        teste = false;
                    }
                    if(objeto.assunto3 > ''){
                        assunto +=' 3. '+objeto.assunto3 +'.';                    
                    }else {
                        teste = false;
                    }
                    if(objeto.assunto4 > ''){
                        assunto +=' 4. '+objeto.assunto4 +'.';                    
                    }else {
                        teste = false;
                    }
                    if(objeto.assunto5 > ''){
                        assunto +=' 5. '+objeto.assunto5 +'.';                    
                    }else {
                        teste = false;
                    }
                    assunto +=' I. Título.';
                }
                document.getElementById("assunto").innerHTML = assunto;
               
                //window.print();
                
        </script>
    </body>
</html>